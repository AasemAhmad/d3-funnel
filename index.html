<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="D3Funnel: A JavaScript SVG library for rendering funnel, pipeline, and pyramid charts using the D3.js framework.">

    <link rel="stylesheet" media="screen" href="css/stylesheet.css">
    <link rel="stylesheet" media="screen" href="css/d3-funnel.css">

    <title>D3Funnel</title>
  </head>
  <body>
    <div id="header-wrap" class="outer">
      <header class="inner">
        <a id="forkme-banner" href="https://github.com/jakezatecky/d3-funnel">View on GitHub</a>
        <h1 id="project-title">D3Funnel</h1>
        <h2 id="project-tagline">A JavaScript library for rendering funnel charts using the D3.js framework.</h2>
        <section id="downloads">
          <a class="zip-download-link" href="https://github.com/jakezatecky/d3-funnel/zipball/master">Download this project as a .zip file</a>
          <a class="tar-download-link" href="https://github.com/jakezatecky/d3-funnel/tarball/master">Download this project as a tar.gz file</a>
        </section>
      </header>
    </div>

    <div id="main-content-wrap" class="outer">
      <section id="main-content" class="inner">
        <p><strong>D3Funnel</strong> is an extensible, open-source JavaScript library for rendering
          funnel charts using the <a href="http://d3js.org/">D3.js</a> library.
        </p>
        <p>D3Funnel is focused on providing practical and visually appealing funnels
          through a variety of customization options. Check out the example below to get a showcasing of the several possible options.
        </p>
        <div class="demo">
          <div class="demo-funnel">
            <div id="funnel"></div>
          </div>
          <div class="demo-options">
            <form>
              <label>
                <input type="checkbox" value="curved">
                Curved
              </label>
              <label>
                <input type="checkbox" value="pinched" checked>
                Pinched
              </label>
              <label>
                <input type="checkbox" value="gradient">
                Gradient
              </label>
              <label>
                <input type="checkbox" value="inverted">
                Inverted
              </label>
              <label>
                <input type="checkbox" value="hover">
                Hover Effects
              </label>
              <label>
                <input type="checkbox" value="click">
                Click Event
              </label>
              <label>
                <input type="checkbox" value="dynamic" checked>
                Dynamic Area
              </label>
              <label>
                <input type="checkbox" value="animation">
                Load Animation
              </label>
              <label>
                <input type="checkbox" value="label">
                Style Labels
              </label>
              <label>
                <input type="checkbox" value="color">
                Custom Color
              </label>
            </form>
          </div>
        </div>
      </section>
    </div>

    <div id="footer-wrap" class="outer">
      <footer class="inner">
        <p class="copyright">D3Funnel maintained by <a href="https://github.com/jakezatecky">jakezatecky</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.js"></script>
    <script src="https://rawgit.com/jakezatecky/d3-funnel/master/dist/d3-funnel.js"></script>
    <script>
      $(function() {
        $('input').change(function() {
          var data = [];
          if (!$('[value="color"]').is(':checked')) {
            data = [
              ['Applicants',   12000],
              ['Pre-screened', 4000],
              ['Interviewed',  2500],
              ['Hired',        1500],
            ];
          } else {
            data = [
              ['Teal',      12000, '#008080'],
              ['Byzantium', 4000,  '#702963'],
              ['Persimmon', 2500,  '#ff634d'],
              ['Azure',     1500,  '#007fff'],
            ];
          }

          var options = {};
          var settings = {
            curved: {
              isCurved: true,
            },
            pinched: {
              bottomPinch: 1,
            },
            gradient: {
              fillType: 'gradient',
            },
            inverted: {
              isInverted: true,
            },
            hover: {
              hoverEffects: true,
            },
            click: {
              onItemClick: function(d, i) {
                alert('<' + d.label + '> selected.');
              }
            },
            dynamic: {
              dynamicArea: true,
            },
            animation: {
              animation: 200,
            },
            label: {
              label: {
                fontSize: '15px',
                fill: '#ffeb81',
              },
            },
          };

          $('input[type="checkbox"]:checked').each(function() {
            options = $.extend(options, settings[$(this).val()]);
          });

          // Inversion with pinch looks bad
          // Change bottom width to make it look slightly better
          if (options.isInverted && options.bottomPinch) {
            options.bottomWidth = 1 / 2;
          }

          (new D3Funnel('#funnel')).draw(data, options);
        }).trigger('change');
      });
    </script>
  </body>
</html>
